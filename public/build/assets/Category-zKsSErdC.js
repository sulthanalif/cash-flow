import{d as N,q as B,x as P,r as g,g as M,w as i,e as s,u as a,b as r,i as n,t as T,y as K,j as q,o as x,c as $,a as U,h as L,z as S,F as O}from"./app-g-3aFkDB.js";import{a as R,b as z,c as I,d as Y,e as G,t as C,_ as H}from"./AppLayout.vue_vue_type_script_setup_true_lang-DBnPyI7w.js";import{T as J,_ as Q,a as W}from"./AlertDialog.vue_vue_type_script_setup_true_lang-Bnf1RB5U.js";import{_ as k}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B_2U6K3i.js";import{_ as V}from"./InputError.vue_vue_type_script_setup_true_lang-DzHKCrgI.js";import{_ as j}from"./Input.vue_vue_type_script_setup_true_lang-Dhbl1ygG.js";import{_ as E}from"./Label.vue_vue_type_script_setup_true_lang-DswgkDBi.js";import{_ as X,P as Z}from"./SheetFooter.vue_vue_type_script_setup_true_lang-SWoCD4Ko.js";import{_ as ee}from"./Spinner.vue_vue_type_script_setup_true_lang-CYGQ2Au_.js";import{_ as te}from"./InputSelect.vue_vue_type_script_setup_true_lang-Bd1-8ZSB.js";import"./index-CJu0Llir.js";import"./VisuallyHidden-BSeu6Jig.js";import"./useForwardExpose-DQbwYGZe.js";import"./useForwardPropsEmits-DsHLB4bG.js";import"./loader-circle-CtptGZHL.js";import"./index-C4J_hXM0.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-eNXYtPRm.js";import"./VisuallyHiddenInput-BaX6_9v3.js";import"./check-Cni_5WQi.js";import"./chevron-left-CYiIyQeh.js";const se={class:"flex-1 overflow-y-auto px-6 py-6"},oe={class:"grid gap-2"},ae={class:"grid gap-2"},re={class:"grid gap-2"},le=N({__name:"CategoryForm",setup(w,{expose:h}){const u=B().props.auth,e=P({id:0,user_id:u.user.id,name:"",type:"",description:""}),b=[{value:"expense",label:"Expense"},{value:"income",label:"Income"}],p=g(!1),v=g(""),f=g(""),d=g(!1),y=()=>{d.value=!0;const c=e.id?route("categories.update",e.id):route("categories.store"),t=e.id?"put":"post";e[t](c,{preserveScroll:!0,onSuccess:()=>{C.success(e.id?"Update Category Success":"Create Category Success"),e.reset(),e.clearErrors(),_()},onError:l=>{l.message&&!Object.keys(l).some(o=>o!=="message")&&C.error(l.message)},onFinish:()=>{d.value=!1}})},_=()=>{p.value=!1,setTimeout(()=>{e.reset(),e.clearErrors()},300)};return h({openCreateModal:()=>{e.reset(),e.clearErrors(),e.id=0,v.value="Create Category",f.value="Add a new category to the system.",p.value=!0},openEditModal:c=>{e.clearErrors(),e.id=c.id,e.name=c.name,e.type=c.type,e.description=c.description,v.value="Edit Category",f.value="Modify the category details.",p.value=!0}}),(c,t)=>(x(),M(a(G),{open:p.value,"onUpdate:open":t[3]||(t[3]=l=>p.value=l)},{default:i(()=>[s(a(R),{class:"flex h-full w-full flex-col gap-0 p-0 sm:max-w-md"},{default:i(()=>[s(a(z),{class:"border-b px-6 py-6"},{default:i(()=>[s(a(I),null,{default:i(()=>[n(T(v.value),1)]),_:1}),s(a(Y),null,{default:i(()=>[n(T(f.value),1)]),_:1})]),_:1}),r("div",se,[r("form",{id:"categoryForm",onSubmit:K(y,["prevent"]),class:"flex flex-col gap-6"},[r("div",oe,[s(E,{for:"name",class:"font-semibold"},{default:i(()=>[...t[4]||(t[4]=[n("Category Name",-1)])]),_:1}),s(j,{id:"name",type:"text",required:"",autofocus:"",placeholder:"e.g. category-name",modelValue:a(e).name,"onUpdate:modelValue":t[0]||(t[0]=l=>a(e).name=l)},null,8,["modelValue"]),s(V,{message:a(e).errors.name},null,8,["message"]),t[5]||(t[5]=r("p",{class:"text-[0.8rem] text-muted-foreground"},[n(" Use a convention like "),r("code",null,"resource-action"),n(" (e.g., category-expense). ")],-1))]),r("div",ae,[s(E,{for:"type",class:"font-semibold"},{default:i(()=>[...t[6]||(t[6]=[n("Category Type",-1)])]),_:1}),s(te,{id:"type",type:"text",required:"",modelValue:a(e).type,"onUpdate:modelValue":t[1]||(t[1]=l=>a(e).type=l),options:b,label:"Category Type",placeholder:"Select category type"},null,8,["modelValue"]),s(V,{message:a(e).errors.type},null,8,["message"]),t[7]||(t[7]=r("p",{class:"text-[0.8rem] text-muted-foreground"},[n(" Use a convention like "),r("code",null,"expense"),n(" or "),r("code",null,"income"),n(". ")],-1))]),r("div",re,[s(E,{for:"description",class:"font-semibold"},{default:i(()=>[...t[8]||(t[8]=[n("Category Description",-1)])]),_:1}),s(j,{id:"description",type:"text",placeholder:"e.g. Expense category",modelValue:a(e).description,"onUpdate:modelValue":t[2]||(t[2]=l=>a(e).description=l)},null,8,["modelValue"]),s(V,{message:a(e).errors.description},null,8,["message"])])],32)]),s(a(X),{class:"mt-auto px-6 py-4 sm:justify-between dark:bg-transparent"},{default:i(()=>[s(a(k),{type:"submit",form:"categoryForm",disabled:d.value},{default:i(()=>[d.value?(x(),M(ee,{key:0,class:"animate-spin"})):q("",!0),t[9]||(t[9]=n(" Save ",-1))]),_:1},8,["disabled"]),s(a(k),{type:"button",variant:"ghost",onClick:_},{default:i(()=>[...t[10]||(t[10]=[n(" Cancel ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}}),ne={class:"flex h-full flex-1 flex-col gap-4 p-4"},ie={class:"flex justify-between items-center gap-4"},de={class:"flex justify-end items-center gap-2"},ce={key:0},Ae=N({__name:"Category",props:{categories:{}},setup(w){const u=B().props.auth.permissions,e=$(()=>Array.isArray(u)&&u.includes("category-create")),b=$(()=>Array.isArray(u)&&u.includes("category-edit")),p=$(()=>Array.isArray(u)&&u.includes("category-delete")),v=w,f=g(null),d=P({id:0,name:"",type:"",description:""}),y=g(!1),_=g(!1),D=o=>{d.id=o.id,d.name=o.name,d.type=o.type,d.description=o.description,y.value=!0},F=()=>{_.value=!0,d.delete(route("categories.destroy",d.id),{preserveScroll:!0,onSuccess:()=>{C.success("Delete Category Success"),y.value=!1},onError:o=>{o.message&&C.error(o.message)},onFinish:()=>{_.value=!1}})},c=[{accessorKey:"name",header:"Name",cell:({row:o})=>S("div",{class:"font-medium"},o.getValue("name"))},{accessorKey:"type",header:"Type",cell:({row:o})=>S("div",{class:"font-medium"},o.getValue("type"))},{accessorKey:"description",header:"Description",cell:({row:o})=>S("div",{class:"font-medium"},o.getValue("description")??"-")}],t=[...b.value?[{label:"Edit Category",icon:Z,onClick:o=>f.value?.openEditModal(o)}]:[],...p.value?[{label:"Delete Category",icon:J,class:"text-red-600 focus:text-red-600",onClick:o=>D(o)}]:[]],l=[{title:"Categories",href:"/categories"}];return(o,m)=>(x(),U(O,null,[s(a(L),{title:"Categories"}),s(H,{breadcrumbs:l},{default:i(()=>[r("div",ne,[r("div",ie,[m[3]||(m[3]=r("div",{class:"flex justify-between items-center gap-2"},[r("div",null,[r("h2",{class:"text-2xl font-bold"},"Categories"),r("p",{class:"text-sm text-gray-500"},"Manage your categories")])],-1)),r("div",de,[e.value?(x(),U("div",ce,[s(a(k),{class:"w-32",onClick:m[0]||(m[0]=A=>f.value?.openCreateModal())},{default:i(()=>[...m[2]||(m[2]=[n(" Create ",-1)])]),_:1})])):q("",!0)])]),s(Q,{data:v.categories,columns:c,actions:!0,"action-list":t,"row-selection":!0},null,8,["data"])]),s(le,{ref_key:"categoryFormRef",ref:f},null,512),s(W,{open:y.value,"onUpdate:open":m[1]||(m[1]=A=>y.value=A),title:"Delete Category?",description:`Are you sure you want to delete the category '${a(d).name}'? This cannot be undone.`,"confirm-text":"Yes, Delete","cancel-text":"Cancel",variant:"destructive","is-loading":_.value,onConfirm:F},null,8,["open","description","is-loading"])]),_:1})],64))}});export{Ae as default};
