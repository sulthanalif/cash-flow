import{d as j,y as U,A as T,z as v,c as V,w as n,a as t,u as s,f as o,e as i,t as D,B as P,b as L,o as x,j as C,g as F,k as O,C as A,F as R}from"./app-CWJbBq8d.js";import{a as q,b as K,c as z,d as I,e as Y,t as w,_ as G}from"./AppLayout.vue_vue_type_script_setup_true_lang-CkwwiSMc.js";import{T as H,_ as J,a as Q}from"./AlertDialog.vue_vue_type_script_setup_true_lang-B1nFD1ze.js";import{_ as S}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-jZSWENVw.js";import{_ as M}from"./InputError.vue_vue_type_script_setup_true_lang-CgwJszMy.js";import{_ as B}from"./Input.vue_vue_type_script_setup_true_lang-DkS3R-gs.js";import{_ as N}from"./Label.vue_vue_type_script_setup_true_lang-C9w5Mgsp.js";import{_ as X,P as Z}from"./SheetFooter.vue_vue_type_script_setup_true_lang-Cuf_f0gr.js";import{_ as ee}from"./Spinner.vue_vue_type_script_setup_true_lang-CSN6QzZF.js";import"./index-DW5GjqPz.js";import"./VisuallyHidden-BXyloCnx.js";import"./useForwardExpose-C3AL2TOg.js";import"./useForwardPropsEmits-BnKj6mOh.js";import"./loader-circle-CqmDDe9e.js";import"./index-C4J_hXM0.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-h3fJgLfG.js";import"./VisuallyHiddenInput-BrzrrAsq.js";import"./check-D64bzGvy.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-DHWBxg29.js";import"./chevron-left-BGh65DUP.js";const ae={class:"flex-1 overflow-y-auto px-6 py-6"},te={class:"grid gap-2"},se={class:"grid gap-2"},le=j({__name:"WalletForm",setup(W,{expose:h}){const u=U().props.auth,e=T({id:0,user_id:u.user.id,name:"",balance:0}),f=v(!1),g=v(""),b=v(""),d=v(!1),c=()=>{d.value=!0;const m=e.id?route("wallets.update",e.id):route("wallets.store"),a=e.id?"put":"post";e[a](m,{preserveScroll:!0,onSuccess:()=>{w.success(e.id?"Update Wallet Success":"Create Wallet Success"),e.reset(),e.clearErrors(),_()},onError:r=>{r.message&&!Object.keys(r).some($=>$!=="message")&&w.error(r.message)},onFinish:()=>{d.value=!1}})},_=()=>{f.value=!1,setTimeout(()=>{e.reset(),e.clearErrors()},300)};return h({openCreateModal:()=>{e.reset(),e.clearErrors(),e.id=0,g.value="Create Wallet",b.value="Add a new wallet to the system.",f.value=!0},openEditModal:m=>{e.clearErrors(),e.id=m.id,e.name=m.name,e.balance=m.balance,g.value="Edit Wallet",b.value="Modify the wallet details.",f.value=!0}}),(m,a)=>(x(),V(s(Y),{open:f.value,"onUpdate:open":a[2]||(a[2]=r=>f.value=r)},{default:n(()=>[t(s(q),{class:"flex h-full w-full flex-col gap-0 p-0 sm:max-w-md"},{default:n(()=>[t(s(K),{class:"border-b px-6 py-6"},{default:n(()=>[t(s(z),null,{default:n(()=>[i(D(g.value),1)]),_:1}),t(s(I),null,{default:n(()=>[i(D(b.value),1)]),_:1})]),_:1}),o("div",ae,[o("form",{id:"walletForm",onSubmit:P(c,["prevent"]),class:"flex flex-col gap-6"},[o("div",te,[t(N,{for:"name",class:"font-semibold"},{default:n(()=>[...a[3]||(a[3]=[i("Wallet Name",-1)])]),_:1}),t(B,{id:"name",type:"text",required:"",autofocus:"",placeholder:"e.g. category-name",modelValue:s(e).name,"onUpdate:modelValue":a[0]||(a[0]=r=>s(e).name=r)},null,8,["modelValue"]),t(M,{message:s(e).errors.name},null,8,["message"]),a[4]||(a[4]=o("p",{class:"text-[0.8rem] text-muted-foreground"},[i(" Use a convention like "),o("code",null,"resource-action"),i(" (e.g., category-expense). ")],-1))]),o("div",se,[t(N,{for:"balance",class:"font-semibold"},{default:n(()=>[...a[5]||(a[5]=[i("Wallet Balance",-1)])]),_:1}),t(B,{id:"balance",type:"number",required:"",placeholder:"e.g. 1000000",modelValue:s(e).balance,"onUpdate:modelValue":a[1]||(a[1]=r=>s(e).balance=r)},null,8,["modelValue"]),t(M,{message:s(e).errors.balance},null,8,["message"])])],32)]),t(s(X),{class:"mt-auto px-6 py-4 sm:justify-between dark:bg-transparent"},{default:n(()=>[t(s(S),{type:"submit",form:"walletForm",disabled:d.value},{default:n(()=>[d.value?(x(),V(ee,{key:0,class:"animate-spin"})):L("",!0),a[6]||(a[6]=i(" Save ",-1))]),_:1},8,["disabled"]),t(s(S),{type:"button",variant:"ghost",onClick:_},{default:n(()=>[...a[7]||(a[7]=[i(" Cancel ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}}),oe={class:"flex h-full flex-1 flex-col gap-4 p-4"},ne={class:"flex justify-between items-center gap-4"},re={class:"flex justify-end items-center gap-2"},ie={key:0},Ve=j({__name:"Wallet",props:{wallets:{}},setup(W){const u=U().props.auth.permissions,e=C(()=>Array.isArray(u)&&u.includes("wallet-create")),f=C(()=>Array.isArray(u)&&u.includes("wallet-edit")),g=C(()=>Array.isArray(u)&&u.includes("wallet-delete")),b=W,d=v(null),c=T({id:0,name:"",balance:0}),_=v(!1),y=v(!1),k=l=>{c.id=l.id,c.name=l.name,c.balance=l.balance,_.value=!0},m=()=>{y.value=!0,c.delete(route("wallets.destroy",c.id),{preserveScroll:!0,onSuccess:()=>{w.success("Delete Wallet Success"),_.value=!1},onError:l=>{l.message&&w.error(l.message)},onFinish:()=>{y.value=!1}})},a=[{accessorKey:"name",header:"Name",cell:({row:l})=>A("div",{class:"font-medium"},l.getValue("name"))},{accessorKey:"balance",header:"Balance",cell:({row:l})=>A("div",{class:"font-medium"},`Rp. ${Number(l.getValue("balance")).toLocaleString("id-ID")}`)}],r=[...f.value?[{label:"Edit Wallet",icon:Z,onClick:l=>d.value?.openEditModal(l)}]:[],...g.value?[{label:"Delete Wallet",icon:H,class:"text-red-600 focus:text-red-600",onClick:l=>k(l)}]:[]],$=[{title:"Wallets",href:"/wallets"}];return(l,p)=>(x(),F(R,null,[t(s(O),{title:"Wallets"}),t(G,{breadcrumbs:$},{default:n(()=>[o("div",oe,[o("div",ne,[p[3]||(p[3]=o("div",{class:"flex justify-between items-center gap-2"},[o("div",null,[o("h2",{class:"text-2xl font-bold"},"Wallets"),o("p",{class:"text-sm text-gray-500"},"Manage your wallets")])],-1)),o("div",re,[e.value?(x(),F("div",ie,[t(s(S),{class:"w-32",onClick:p[0]||(p[0]=E=>d.value?.openCreateModal())},{default:n(()=>[...p[2]||(p[2]=[i(" Create ",-1)])]),_:1})])):L("",!0)])]),t(J,{data:b.wallets,columns:a,actions:!0,"action-list":r},null,8,["data"])]),t(le,{ref_key:"walletFormRef",ref:d},null,512),t(Q,{open:_.value,"onUpdate:open":p[1]||(p[1]=E=>_.value=E),title:"Delete Wallet?",description:`Are you sure you want to delete the wallet '${s(c).name}'? This cannot be undone.`,"confirm-text":"Yes, Delete","cancel-text":"Cancel",variant:"destructive","is-loading":y.value,onConfirm:m},null,8,["open","description","is-loading"])]),_:1})],64))}});export{Ve as default};
